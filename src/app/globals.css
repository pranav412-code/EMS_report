@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 225 43% 97%;
    --foreground: 220 13% 18%;
    --card: 0 0% 100%;
    --card-foreground: 220 13% 18%;
    --popover: 0 0% 100%;
    --popover-foreground: 220 13% 18%;
    --primary: 213 65% 33%;
    --primary-foreground: 0 0% 98%;
    --secondary: 220 13% 91%;
    --secondary-foreground: 220 13% 18%;
    --muted: 220 9% 90%;
    --muted-foreground: 220 9% 45%;
    --accent: 220 13% 91%;
    --accent-foreground: 220 13% 18%;
    --destructive: 7 80% 57%;
    --destructive-foreground: 0 0% 98%;
    --border: 220 13% 88%;
    --input: 220 13% 93%;
    --ring: 213 65% 33%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }
  .dark {
    --background: 220 13% 10%;
    --foreground: 0 0% 98%;
    --card: 220 13% 10%;
    --card-foreground: 0 0% 98%;
    --popover: 220 13% 10%;
    --popover-foreground: 0 0% 98%;
    --primary: 213 65% 73%;
    --primary-foreground: 213 65% 13%;
    --secondary: 220 13% 20%;
    --secondary-foreground: 0 0% 98%;
    --muted: 220 13% 20%;
    --muted-foreground: 220 9% 65%;
    --accent: 220 13% 20%;
    --accent-foreground: 0 0% 98%;
    --destructive: 7 80% 57%;
    --destructive-foreground: 0 0% 98%;
    --border: 220 13% 25%;
    --input: 220 13% 25%;
    --ring: 213 65% 73%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
  h2 {
    @apply text-lg font-bold text-primary;
  }
  h3 {
    @apply text-base font-semibold;
  }
}

@layer components {
  .report-container {
    @apply max-w-7xl mx-auto my-6 bg-card shadow-lg rounded-2xl overflow-hidden;
  }

  .report-header {
    background: linear-gradient(90deg, hsl(var(--primary)), #2c6bc2);
    @apply text-primary-foreground p-6 flex flex-wrap gap-3 items-start;
  }

  .report-header h1 {
    @apply text-2xl font-bold m-0 mb-1.5;
  }
  
  .report-header .right {
    @apply ml-auto flex gap-2 flex-wrap;
  }
  
  .badge {
    @apply bg-card text-primary rounded-full px-2.5 py-1.5 font-bold text-xs;
  }

  .meta-bar {
    @apply flex flex-wrap gap-4 bg-primary/10 p-3 px-5 border-b;
  }

  .meta-bar .item {
    @apply flex items-center gap-2 text-sm;
  }

  .meta-bar .label {
    @apply font-semibold text-slate-700;
  }

  .report-section {
    @apply p-5 border-b;
  }
  .report-section:last-of-type {
    @apply border-b-0;
  }

  .draggable-section .drag-handle {
    @apply absolute top-1/2 -translate-y-1/2 -left-2 w-8 h-8 flex items-center justify-center text-muted-foreground/50 cursor-move opacity-0 group-hover/section:opacity-100 transition-opacity z-10;
  }

  .report-section h2 {
    @apply mb-3 flex items-center gap-2;
  }

  .kpis {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3;
  }

  .kpi {
    @apply bg-card border rounded-xl p-3;
  }

  .kpi .title {
    @apply text-xs text-muted-foreground;
  }

  .kpi .value {
    @apply text-xl font-bold mt-1;
  }

  .kpi .hint {
    @apply text-xs mt-1 text-slate-400;
  }

  .kpi .good {
    @apply text-green-600 font-semibold;
  }

  .kpi .bad {
    @apply text-red-600 font-semibold;
  }

  .grid-2 {
    @apply grid grid-cols-1 md:grid-cols-2 gap-4;
  }
  .grid-2.equal {
    @apply md:grid-cols-2;
  }
  .grid-3 {
    @apply grid grid-cols-1 md:grid-cols-3 gap-3;
  }
  
  .chart-card {
    @apply bg-card border rounded-xl p-3.5 min-h-[120px] relative;
  }

  .chart-card h3 {
    @apply mb-2.5 flex items-center gap-2;
  }

  .subgrid {
    @apply grid grid-cols-1 lg:grid-cols-2 gap-3;
  }
  .subgrid-3 {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3;
  }

  .chart-slot {
    border: 2px dashed hsl(var(--primary) / 0.2);
    @apply rounded-lg min-h-[220px] flex items-center justify-center p-3 bg-primary/5 overflow-hidden relative transition-colors;
  }
  .chart-slot.small {
    @apply min-h-[140px];
  }
  .chart-slot.drag-over {
    background: hsl(var(--primary) / 0.1);
    border-color: hsl(var(--primary) / 0.5);
  }
  .chart-slot img {
    @apply max-w-full max-h-full block m-auto object-contain;
  }

  .chart-tools {
    @apply absolute right-2.5 top-2.5 flex gap-2;
  }
  .chart-tools .btn {
    @apply h-auto;
  }
  .chart-tools .btn.danger {
    @apply bg-destructive/10 border-destructive/20 text-destructive;
  }
  .chart-tools .btn.danger:hover {
    @apply bg-destructive/20;
  }

  .remarks {
    @apply mt-2.5 bg-secondary/30 border border-dashed rounded-lg p-2.5 min-h-[80px];
  }

  .editable-field {
    @apply outline-none w-full bg-transparent;
  }

  .editable-field[contenteditable=true]:focus,
  .editable-field:focus {
    @apply bg-yellow-50/80 ring-2 ring-yellow-400 rounded-sm;
  }

  .tag {
    @apply inline-flex items-center gap-1.5 bg-primary/10 text-primary border border-primary/20 rounded-full px-2.5 py-1 text-xs font-medium;
  }

  .report-footer {
    @apply p-4 px-5 bg-slate-100 text-slate-500 text-xs text-center;
  }
}

@media print {
  body {
    background: #fff;
  }
  .report-container {
    box-shadow: none;
    border-radius: 0;
    margin: 0;
    max-width: 100%;
    border: none;
  }
  .action-bar, .chart-tools, .ai-insights-btn, .drag-handle {
    display: none !important;
  }
  .report-section {
    page-break-inside: avoid;
  }
  .chart-card, .kpi {
    page-break-inside: avoid;
  }
}
